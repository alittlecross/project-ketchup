<%- include('_head') %>

<body>
  <div id='banner'>
    <div id='small-title'>Resource Management&nbsp;Tool</div>
    <% if (user.role === 'Resource Manager') { %>
      <a class='banner-link' href='/<%= person.personId %>/person/edit'>edit</a>
    <% } %>
    <a class='banner-link right' href='/log-out'>log out</a>
    <a class='banner-link right' href='/dashboard'>dashboard</a>
    <a class='banner-link right' href='/people'>people</a>
  </div>

  <form id='person-form' class='extra-bottom' autocomplete='off'>
  
    <input type='text' name='personId' hidden value='<%= person.personId %>'>
    <div class='form-row'>
      <label class='field-label'>staff number</label>
      <input class='person-record right locked' type='text' name='staffId' value='<%= person.staffId %>' disabled>
    </div>
    <div class='form-row'>
      <label class='field-label'>first name</label>
      <input class='person-record right locked' type='text' name='firstName' value='<%= person.firstName%>' disabled>
    </div>
    <div class='form-row'>
      <label class='field-label'>surname</label>
      <input class='person-record right locked' type='text' name='surname' value='<%= person.surname %>' disabled>
    </div>
    <div class='form-row'>
      <label class='field-label'>email</label>
      <input class='person-record right locked' type='email' name='email' value='<%= person.email %>' disabled>
    </div>

    <div class='form-row'>
      <label class='field-label'>grade</label>
      <select class='person-record right locked' name='gradeId' disabled>
        <% options.grades.forEach(function(grade) { %>
          <option value='<%= grade.optionId %>'
            <% if (person.gradeId === grade.optionId) { %>
              selected
            <% } %>
          ><%= grade.option %></option>
        <% }) %>
      </select>
    </div>
    
    <div class='form-row'>
      <label class='field-label'>role</label>
      <select class='person-record right locked' name='roleId' disabled>
        <% options.roles.forEach(function(role) { %>
          <option value='<%= role.optionId %>'
            <% if (person.role === role.option) { %>
              selected
            <% } %>
          ><%= role.option %></option>
        <% }) %>
      </select>
    </div>
    
    <div class='form-row'>
      <label class='field-label'>status</label>
      <select class='person-record right locked' name='statusId' disabled>
        <% options.statuses.forEach(function(status) { %>
          <option value='<%= status.optionId %>'
            <% if (person.statusId === status.optionId) { %>
              selected
            <% } %>
          ><%= status.option %></option>
        <% }) %>
      </select>
    </div>
    
    <div class='form-row'>
      <label class='field-label'>location</label>
      <select class='person-record right locked' name='locationId' disabled>
        <% options.locations.forEach(function(location) { %>
          <option value='<%= location.optionId %>'
            <% if (person.locationId === location.optionId) { %>
              selected
            <% } %>
          ><%= location.option %></option>
        <% }) %>
      </select>
    </div>
    
    <div class='form-row'>
      <label class='field-label'>manager</label>
      <select class='person-record right locked' name='managerId' disabled>
        <% options.managers.forEach(function(manager) { %>
          <option value='<%= manager.optionId %>'
            <% if (person.managerId === manager.optionId) { %>
              selected
            <% } %>
          ><%= manager.option %></option>
        <% }) %>
      </select>
    </div>
    
    <label class='field-label'>skills</label>
    <div id='skills' class='right locked'>
      <% options.skills.forEach(function(skill) { %>
        <input
        <% if (person.skills.includes(skill.optionId)) { %>
          checked
        <% } %>
        class='hidden' type='checkbox' id='skill-<%= skill.optionId %>' name='skills' value='<%= skill.optionId %>' disabled>
        <label class='skill-button' for='skill-<%= skill.optionId %>'><%= skill.option %></label>
      <% }) %>
    </div>
  
  </form>
</body>
